---
title: 微前端之SingleSpa
---

### single-spa 微前端四大特性:

- 受路由控制渲染的子应用（applications）
- 不受路由控制的组件（parcels）
- 非渲染组件，应用间通信逻辑（utility modules）
- root config 作为子应用通信的路由配置,所有子应用的特殊处理情况都是需要在 root config 做处理的

### 微前端优缺点

#### 优点

- 增量升级（影响范围小）

- 支持多框架（灵活框架无关性）

- 独立部署（项目隔离）

- 共享组件库（便捷）

- 团队自治 （沟通成本小）

#### 缺点

- 有效的负载变大

微前端 的概念，使我们的每一个功能，成为了一个独立的 应用 ，这样会导致我们的依赖项出现大量的重复，对于用户来说，是需要做多次无意义的资源下载，这样其实是不友好的，但是针对该问题，目前有一种方案就是重复的依赖构建独立的资源包进行下载，这样好像是可以避免掉重复性资源的加载问题，但随之而来的两个不可避免的问题就出现了：

在 a 页面 可能不需要 b 页面 的相应资源，但是 c 页面 需要，我们又不能针对这种依赖关系做详细的依赖切分，这样其实对于我们整体的工作而言，是一个很重的任务量，每一个项目都不止一个依赖包，我们不可能花很多的时间去细分每一个依赖包针对当前功能的依赖关系，这是一个非常沉重的工作量
a 页面 可能使用的是 react 16.7 之前的版本，ui 框架 antd 使用的也是 3.x 的，这里面是没有 hooks 的；b 页面 使用的是 react 16.7 之后的版本，这时候支持 hooks ，但是 antd 还没有做更新，只能只用 3.x 版本；c 页面 使用的也是 react 16.7 以后的版本，但是 antd 更新 4.x ，它支持 hooks；这里可能会有人问，为什么不直接使用 react 16.7 版本， antd 4.x 不就行了，何必这么复杂？我们的需求不是一下子完成的，框架也是需要不断的优化实现不管开发效率还是用户体验方面的提升的，版本的控制就是我们需要面对的最大的一个问题，我们不能在同一个公共依赖包里面去做所有版本的兼容问题，这是个不现实的事情

如此来看，好像独立的资源加载好似是最好的办法，可以避免这样的问题，但是有效的负载变大存在的问题还是没有解决，其实独立的资源加载并不是错的，但是它也不是对的，只是我们一直在这个对和错之间，寻找一个边界，其实对和错是不难区分的，难区分的就是它们之间的这个边界问题，如果区分对错的边界，需要耗费我们区分对错更多的成本，那么其实当前的状态，可能就是最好的

当然不是鼓励大家不去更精细化的区分对和错的更深层次的边界，一个中小型企业，时间成本很重要，这种边界的探测对于公司的发展来说起不到什么比较有价值的作用，反而会耽误整体的发展；反之如果是一个专门研究这方面技术的，技术协会或者大型公司的技术团体，我还是很鼓励大家做更深层次的研究的，毕竟物尽其用，人尽其才

- 管理的复杂性

这一块其实内容就很好说明了，管理的复杂性指的很多方面，业务方面、和开发方面等：

业务方面的划分，虽然说做到了更多的细节的把控，人员的目光和方向会更精确一点，但是带来的问题就是，业务的广泛性带来的成本也会很高，老人对业务扩展的创新性是否真的能直达用户内心、新人对业务方向的熟悉性是否能符合整个产品的发展方向，这些都是在不断的业务细分的场景下会出现的问题，有的时候细不一定是好，虽然说这样可以考虑到很多的点，但是很容易因为业务的细分导致大家的目光只盯在一个点上，这样其实对于一整个产品的发展并不友好，因为有可能产品和开发讨论了很久的一个对与错的细节问题，在用户看来，并不重要，尤其是对于业务在快速增长阶段的产品来说，这更是一个噩耗
开发方面的划分，就是一个很明显的、繁琐的一个过程，微前端 带给我们的好处上面已经说的很清楚了，但是根据每一个微应用去做划分的同时，带来的就是一个需要合理规划维护方式的技术难题：
代码库的数量增加，是否有更好的办法去维护每一个版本的更新（CI 是一个目前来说可以解决该问题毕竟）
每一个微应用，可能都是一个单独的仓库，那么一整个团队应该如何管理这些微应用，是否需要一定的规范性去约束每一个项目，还是天马行空的发挥各自的想象
假设有相同的功能点，我们有一套独立的微应用组件，那么这个开发工作应该如何划分，对于组件 api 的支持应该如何去制定
